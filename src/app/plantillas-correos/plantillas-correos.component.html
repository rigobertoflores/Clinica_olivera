<app-menu></app-menu>
<app-sidebar></app-sidebar>
<div class="content-wrapper" style="min-height: 1604.8px">
    <div class="col-md-12">
        <div class="card">
            <div class="card-header p-4">
                <ul class="nav nav-pills">
                    <li class="nav-item"><a class="nav-link active" href="#listaDePlantila"
                            data-toggle="tab">Plantillas</a>
                    </li>
                    <li class="nav-item"><a class="nav-link" href="#nuevaPlantila" data-toggle="tab">Agregar
                            Plantilla</a>
                    </li>
                    <li class="nav-item"><a class="nav-link" href="#agregarPacientesAPlantillas"
                            data-toggle="tab">Agregar usuarios a las plantillas</a></li>
                </ul>
            </div>
            <div class="card-body">
                <div class="tab-content">
                    <div class="tab-pane active" id="listaDePlantila">
                        <div class="container-fluid">

                            <div class="row">
                                <div class="col-md-8 offset-md-2">
                                    <form [formGroup]="listadoPForm" method="post">
                                        <div class="input-group">

                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>

                        <div class="container-fluid">
                            <h2 class="text-center display-4">Buscar Plantilla</h2>
                            <div class="row">
                                <div class="col-md-8 offset-md-2">
                                    <form [formGroup]="buscarPlantillaForm" method="post">
                                        <div class="input-group">
                                            <input type="search" class="form-control form-control-lg"
                                                placeholder="Escriba aquÃ­" formControlName="buscarPlantilla">
                                            <div class="input-group-append">
                                                <button type="submit" class="btn btn-lg btn-default">
                                                    <i class="fa fa-search"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                        <div class="row pt-4">
                            <div class="col-md-6">
                                <div class="card card-primary">
                                    <div class="card-body">
                                        <h2>Plantillas de Correos</h2>
                                        <ul>
                                            <li *ngFor="let plantilla of plantillas" class="texto pt-2"
                                                (click)="viewDetails(plantilla)">
                                                <span class="icono"><i class="fa-solid fa-transporter-empty"></i></span>
                                                {{ plantilla.nombre }}<br>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6" *ngIf="plantillaSelected">
                                <div class="card card-primary">
                                    <div class="card-body">
                                        <form [formGroup]="mostrarPlantillaForm" method="post">
                                            <input type="hidden" formControlName="idSelected">
                                            <div class="form-group">
                                                <input type="text" id="inputName" class="form-control"
                                                    formControlName="nameSelected" placeholder="Nombre de la plantilla:">
                                            </div>
                                            <div class="form-group">
                                                <input #input type="date" id="inputFecha" formControlName="fechaSelected"
                                                    class="form-control" />
                                            </div>
                                            <div class="form-group">
                                                <input type="text" id="inputAsunto" class="form-control"
                                                    formControlName="asuntoSelected" placeholder="Asunto:">
                                            </div>
                                            <div class="form-group">
                                                <textarea id="inputCuerpo" class="form-control" rows="4"
                                                    formControlName="cuerpoSelected"></textarea>
                                            </div>

                                            <div class="col-md-12 text-right">
                                                <button type="button" class="btn btn-info btn-sm" (click)="update()">
                                                    <i class="fas fa-pencil-alt"></i>
                                                    Editar </button>

                                                <button type="button" class="btn btn-danger btn-sm" (click)="delete()">
                                                    <i class="fas fa-trash">
                                                    </i>
                                                    Eliminar
                                                </button>
                                            </div>
                                        </form>

                                    </div>


                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="tab-pane" id="nuevaPlantila">
                        <div class="col-md-12">
                            <div class="card card-primary">
                                <div class="card-body">
                                    <form [formGroup]="agregarPForm" method="post">
                                        <div class="form-group">
                                            <input type="text" id="inputName" class="form-control"
                                                formControlName="name" placeholder="Nombre de la plantilla:">
                                        </div>
                                        <div class="form-group">
                                            <input #input type="date" id="inputFecha" formControlName="fecha"
                                                class="form-control" />
                                        </div>
                                        <div class="form-group">
                                            <input type="text" id="inputAsunto" class="form-control"
                                                formControlName="asunto" placeholder="Asunto:">
                                        </div>
                                        <div class="form-group">
                                            <textarea id="inputCuerpo" class="form-control" rows="4"
                                                formControlName="cuerpo"></textarea>
                                        </div>
                                    </form>
                                </div>
                            </div>
                            <div class="col-md-12 ml-auto">
                                <button (click)="addNew()" type="button" class="btn btn-primary btn-block "> <i
                                        class="fa-solid fa-envelope"></i>
                                    Agregar</button>
                            </div>
                        </div>
                    </div>

                    <div class="tab-pane" id="agregarPacientesAPlantillas">
                        <div class="col-md-12">
                            <div class="card card-primary">
                                <div class="card-body">
                                    <form [formGroup]="RelacionPlantillaPacienteForm" method="post">
                                        <div class="col-md-12">
                                            <div class="card">
                                                <div class="card-header">
                                                    <h3 class="card-title">Collapsible Accordion</h3>
                                                </div>

                                                <div class="card-body">

                                                    <div id="accordion">
                                                        <div class="card card-primary">
                                                            <div class="card-header">
                                                                <h4 class="card-title w-100">
                                                                    <a class="d-block w-100 collapsed"
                                                                        data-toggle="collapse" href="#collapseOne"
                                                                        aria-expanded="false">
                                                                        Collapsible Group Item #1
                                                                    </a>
                                                                </h4>
                                                            </div>
                                                            <div id="collapseOne" class="collapse"
                                                                data-parent="#accordion" style="">
                                                                <div class="card-body">
                                                                    <div class="form-check">
                                                                        <input class="form-check-input" type="checkbox"
                                                                            checked="">
                                                                        <label class="form-check-label">Checkbox
                                                                            checked</label>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="card card-danger">
                                                            <div class="card-header">
                                                                <h4 class="card-title w-100">
                                                                    <a class="d-block w-100" data-toggle="collapse"
                                                                        href="#collapseTwo">
                                                                        Collapsible Group Danger
                                                                    </a>
                                                                </h4>
                                                            </div>
                                                            <div id="collapseTwo" class="collapse"
                                                                data-parent="#accordion">
                                                                <div class="card-body">
                                                                    <div class="form-check">
                                                                        <input class="form-check-input" type="checkbox"
                                                                            checked="">
                                                                        <label class="form-check-label">Checkbox
                                                                            checked</label>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="card card-success">
                                                            <div class="card-header">
                                                                <h4 class="card-title w-100">
                                                                    <a class="d-block w-100 collapsed"
                                                                        data-toggle="collapse" href="#collapseThree"
                                                                        aria-expanded="false">
                                                                        Collapsible Group Success
                                                                    </a>
                                                                </h4>
                                                            </div>
                                                            <div id="collapseThree" class="collapse"
                                                                data-parent="#accordion" style="">
                                                                <div class="card-body">
                                                                    Anim pariatur cliche reprehenderit, enim eiusmod
                                                                    high life accusamus terry richardson ad
                                                                    squid.
                                                                    3
                                                                    wolf moon officia aute, non cupidatat skateboard
                                                                    dolor brunch. Food truck quinoa nesciunt
                                                                    laborum
                                                                    eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put
                                                                    a bird on it squid single-origin coffee
                                                                    nulla
                                                                    assumenda shoreditch et. Nihil anim keffiyeh
                                                                    helvetica, craft beer labore wes anderson cred
                                                                    nesciunt sapiente ea proident. Ad vegan excepteur
                                                                    butcher vice lomo. Leggings occaecat craft
                                                                    beer
                                                                    farm-to-table, raw denim aesthetic synth nesciunt
                                                                    you probably haven't heard of them
                                                                    accusamus
                                                                    labore sustainable VHS.
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>

                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>

            </div>
        </div>

    </div>

</div>

<div class="lottie-container" *ngIf="showLoading">
    <ng-container>
        <app-loading></app-loading>
    </ng-container>
</div>